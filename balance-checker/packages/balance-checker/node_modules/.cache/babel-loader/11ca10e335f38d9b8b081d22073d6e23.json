{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serializePathv2 = serializePathv2;\nexports.signSendChunkv2 = signSendChunkv2;\nexports.publicKeyv2 = publicKeyv2;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _helperV = require(\"./helperV1\");\n\nvar _common = require(\"./common\");\n\nfunction serializePathv2(path) {\n  if (!path || path.length !== 5) {\n    throw new Error(\"Invalid path.\");\n  }\n\n  var buf = Buffer.alloc(20);\n  buf.writeUInt32LE(0x80000000 + path[0], 0);\n  buf.writeUInt32LE(0x80000000 + path[1], 4);\n  buf.writeUInt32LE(0x80000000 + path[2], 8);\n  buf.writeUInt32LE(path[3], 12);\n  buf.writeUInt32LE(path[4], 16);\n  return buf;\n}\n\nfunction signSendChunkv2(_x, _x2, _x3, _x4) {\n  return _signSendChunkv.apply(this, arguments);\n}\n\nfunction _signSendChunkv() {\n  _signSendChunkv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(app, chunkIdx, chunkNum, chunk) {\n    var payloadType;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            payloadType = _common.PAYLOAD_TYPE.ADD;\n\n            if (chunkIdx === 1) {\n              payloadType = _common.PAYLOAD_TYPE.INIT;\n            }\n\n            if (chunkIdx === chunkNum) {\n              payloadType = _common.PAYLOAD_TYPE.LAST;\n            }\n\n            return _context.abrupt(\"return\", (0, _helperV.signSendChunkv1)(app, payloadType, 0, chunk));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _signSendChunkv.apply(this, arguments);\n}\n\nfunction publicKeyv2(_x5, _x6) {\n  return _publicKeyv.apply(this, arguments);\n}\n\nfunction _publicKeyv() {\n  _publicKeyv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(app, data) {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", app.transport.send(_common.CLA, _common.INS.GET_ADDR_SECP256K1, 0, 0, data, [_common.ERROR_CODE.NoError]).then(function (response) {\n              var errorCodeData = response.slice(-2);\n              var returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n              var compressedPk = Buffer.from(response.slice(0, 33));\n              return {\n                pk: \"OBSOLETE PROPERTY\",\n                compressed_pk: compressedPk,\n                return_code: returnCode,\n                error_message: (0, _common.errorCodeToString)(returnCode)\n              };\n            }, _common.processErrorResponse));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _publicKeyv.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/makand/cosmwasm/dApps/node_modules/ledger-cosmos-js/dist/helperV2.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","serializePathv2","signSendChunkv2","publicKeyv2","_regenerator","_asyncToGenerator2","_helperV","_common","path","length","Error","buf","Buffer","alloc","writeUInt32LE","_x","_x2","_x3","_x4","_signSendChunkv","apply","arguments","default","mark","_callee","app","chunkIdx","chunkNum","chunk","payloadType","wrap","_callee$","_context","prev","next","PAYLOAD_TYPE","ADD","INIT","LAST","abrupt","signSendChunkv1","stop","_x5","_x6","_publicKeyv","_callee2","data","_callee2$","_context2","transport","send","CLA","INS","GET_ADDR_SECP256K1","ERROR_CODE","NoError","then","response","errorCodeData","slice","returnCode","compressedPk","from","pk","compressed_pk","return_code","error_message","errorCodeToString","processErrorResponse"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,eAAR,GAA0BA,eAA1B;AACAF,OAAO,CAACG,eAAR,GAA0BA,eAA1B;AACAH,OAAO,CAACI,WAAR,GAAsBA,WAAtB;;AAEA,IAAIC,YAAY,GAAGT,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAAzC;;AAEA,IAAIS,kBAAkB,GAAGV,sBAAsB,CAACC,OAAO,CAAC,yCAAD,CAAR,CAA/C;;AAEA,IAAIU,QAAQ,GAAGV,OAAO,CAAC,YAAD,CAAtB;;AAEA,IAAIW,OAAO,GAAGX,OAAO,CAAC,UAAD,CAArB;;AAEA,SAASK,eAAT,CAAyBO,IAAzB,EAA+B;AAC7B,MAAI,CAACA,IAAD,IAASA,IAAI,CAACC,MAAL,KAAgB,CAA7B,EAAgC;AAC9B,UAAM,IAAIC,KAAJ,CAAU,eAAV,CAAN;AACD;;AAED,MAAIC,GAAG,GAAGC,MAAM,CAACC,KAAP,CAAa,EAAb,CAAV;AACAF,EAAAA,GAAG,CAACG,aAAJ,CAAkB,aAAaN,IAAI,CAAC,CAAD,CAAnC,EAAwC,CAAxC;AACAG,EAAAA,GAAG,CAACG,aAAJ,CAAkB,aAAaN,IAAI,CAAC,CAAD,CAAnC,EAAwC,CAAxC;AACAG,EAAAA,GAAG,CAACG,aAAJ,CAAkB,aAAaN,IAAI,CAAC,CAAD,CAAnC,EAAwC,CAAxC;AACAG,EAAAA,GAAG,CAACG,aAAJ,CAAkBN,IAAI,CAAC,CAAD,CAAtB,EAA2B,EAA3B;AACAG,EAAAA,GAAG,CAACG,aAAJ,CAAkBN,IAAI,CAAC,CAAD,CAAtB,EAA2B,EAA3B;AACA,SAAOG,GAAP;AACD;;AAED,SAAST,eAAT,CAAyBa,EAAzB,EAA6BC,GAA7B,EAAkCC,GAAlC,EAAuCC,GAAvC,EAA4C;AAC1C,SAAOC,eAAe,CAACC,KAAhB,CAAsB,IAAtB,EAA4BC,SAA5B,CAAP;AACD;;AAED,SAASF,eAAT,GAA2B;AACzBA,EAAAA,eAAe,GAAG,CAAC,GAAGd,kBAAkB,CAACiB,OAAvB,GAAiC,aAAalB,YAAY,CAACkB,OAAb,CAAqBC,IAArB,CAA0B,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,QAAtB,EAAgCC,QAAhC,EAA0CC,KAA1C,EAAiD;AACzI,QAAIC,WAAJ;AACA,WAAOzB,YAAY,CAACkB,OAAb,CAAqBQ,IAArB,CAA0B,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AAC3D,aAAO,CAAP,EAAU;AACR,gBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACE,eAAK,CAAL;AACEL,YAAAA,WAAW,GAAGtB,OAAO,CAAC4B,YAAR,CAAqBC,GAAnC;;AAEA,gBAAIV,QAAQ,KAAK,CAAjB,EAAoB;AAClBG,cAAAA,WAAW,GAAGtB,OAAO,CAAC4B,YAAR,CAAqBE,IAAnC;AACD;;AAED,gBAAIX,QAAQ,KAAKC,QAAjB,EAA2B;AACzBE,cAAAA,WAAW,GAAGtB,OAAO,CAAC4B,YAAR,CAAqBG,IAAnC;AACD;;AAED,mBAAON,QAAQ,CAACO,MAAT,CAAgB,QAAhB,EAA0B,CAAC,GAAGjC,QAAQ,CAACkC,eAAb,EAA8Bf,GAA9B,EAAmCI,WAAnC,EAAgD,CAAhD,EAAmDD,KAAnD,CAA1B,CAAP;;AAEF,eAAK,CAAL;AACA,eAAK,KAAL;AACE,mBAAOI,QAAQ,CAACS,IAAT,EAAP;AAhBJ;AAkBD;AACF,KArBM,EAqBJjB,OArBI,CAAP;AAsBD,GAxB+D,CAA9C,CAAlB;AAyBA,SAAOL,eAAe,CAACC,KAAhB,CAAsB,IAAtB,EAA4BC,SAA5B,CAAP;AACD;;AAED,SAASlB,WAAT,CAAqBuC,GAArB,EAA0BC,GAA1B,EAA+B;AAC7B,SAAOC,WAAW,CAACxB,KAAZ,CAAkB,IAAlB,EAAwBC,SAAxB,CAAP;AACD;;AAED,SAASuB,WAAT,GAAuB;AACrBA,EAAAA,WAAW,GAAG,CAAC,GAAGvC,kBAAkB,CAACiB,OAAvB,GAAiC,aAAalB,YAAY,CAACkB,OAAb,CAAqBC,IAArB,CAA0B,SAASsB,QAAT,CAAkBpB,GAAlB,EAAuBqB,IAAvB,EAA6B;AACjH,WAAO1C,YAAY,CAACkB,OAAb,CAAqBQ,IAArB,CAA0B,SAASiB,SAAT,CAAmBC,SAAnB,EAA8B;AAC7D,aAAO,CAAP,EAAU;AACR,gBAAQA,SAAS,CAACf,IAAV,GAAiBe,SAAS,CAACd,IAAnC;AACE,eAAK,CAAL;AACE,mBAAOc,SAAS,CAACT,MAAV,CAAiB,QAAjB,EAA2Bd,GAAG,CAACwB,SAAJ,CAAcC,IAAd,CAAmB3C,OAAO,CAAC4C,GAA3B,EAAgC5C,OAAO,CAAC6C,GAAR,CAAYC,kBAA5C,EAAgE,CAAhE,EAAmE,CAAnE,EAAsEP,IAAtE,EAA4E,CAACvC,OAAO,CAAC+C,UAAR,CAAmBC,OAApB,CAA5E,EAA0GC,IAA1G,CAA+G,UAAUC,QAAV,EAAoB;AACnK,kBAAIC,aAAa,GAAGD,QAAQ,CAACE,KAAT,CAAe,CAAC,CAAhB,CAApB;AACA,kBAAIC,UAAU,GAAGF,aAAa,CAAC,CAAD,CAAb,GAAmB,GAAnB,GAAyBA,aAAa,CAAC,CAAD,CAAvD;AACA,kBAAIG,YAAY,GAAGjD,MAAM,CAACkD,IAAP,CAAYL,QAAQ,CAACE,KAAT,CAAe,CAAf,EAAkB,EAAlB,CAAZ,CAAnB;AACA,qBAAO;AACLI,gBAAAA,EAAE,EAAE,mBADC;AAELC,gBAAAA,aAAa,EAAEH,YAFV;AAGLI,gBAAAA,WAAW,EAAEL,UAHR;AAILM,gBAAAA,aAAa,EAAE,CAAC,GAAG3D,OAAO,CAAC4D,iBAAZ,EAA+BP,UAA/B;AAJV,eAAP;AAMD,aAViC,EAU/BrD,OAAO,CAAC6D,oBAVuB,CAA3B,CAAP;;AAYF,eAAK,CAAL;AACA,eAAK,KAAL;AACE,mBAAOpB,SAAS,CAACP,IAAV,EAAP;AAhBJ;AAkBD;AACF,KArBM,EAqBJI,QArBI,CAAP;AAsBD,GAvB2D,CAA9C,CAAd;AAwBA,SAAOD,WAAW,CAACxB,KAAZ,CAAkB,IAAlB,EAAwBC,SAAxB,CAAP;AACD","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serializePathv2 = serializePathv2;\nexports.signSendChunkv2 = signSendChunkv2;\nexports.publicKeyv2 = publicKeyv2;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _helperV = require(\"./helperV1\");\n\nvar _common = require(\"./common\");\n\nfunction serializePathv2(path) {\n  if (!path || path.length !== 5) {\n    throw new Error(\"Invalid path.\");\n  }\n\n  var buf = Buffer.alloc(20);\n  buf.writeUInt32LE(0x80000000 + path[0], 0);\n  buf.writeUInt32LE(0x80000000 + path[1], 4);\n  buf.writeUInt32LE(0x80000000 + path[2], 8);\n  buf.writeUInt32LE(path[3], 12);\n  buf.writeUInt32LE(path[4], 16);\n  return buf;\n}\n\nfunction signSendChunkv2(_x, _x2, _x3, _x4) {\n  return _signSendChunkv.apply(this, arguments);\n}\n\nfunction _signSendChunkv() {\n  _signSendChunkv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(app, chunkIdx, chunkNum, chunk) {\n    var payloadType;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            payloadType = _common.PAYLOAD_TYPE.ADD;\n\n            if (chunkIdx === 1) {\n              payloadType = _common.PAYLOAD_TYPE.INIT;\n            }\n\n            if (chunkIdx === chunkNum) {\n              payloadType = _common.PAYLOAD_TYPE.LAST;\n            }\n\n            return _context.abrupt(\"return\", (0, _helperV.signSendChunkv1)(app, payloadType, 0, chunk));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _signSendChunkv.apply(this, arguments);\n}\n\nfunction publicKeyv2(_x5, _x6) {\n  return _publicKeyv.apply(this, arguments);\n}\n\nfunction _publicKeyv() {\n  _publicKeyv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(app, data) {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", app.transport.send(_common.CLA, _common.INS.GET_ADDR_SECP256K1, 0, 0, data, [_common.ERROR_CODE.NoError]).then(function (response) {\n              var errorCodeData = response.slice(-2);\n              var returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n              var compressedPk = Buffer.from(response.slice(0, 33));\n              return {\n                pk: \"OBSOLETE PROPERTY\",\n                compressed_pk: compressedPk,\n                return_code: returnCode,\n                error_message: (0, _common.errorCodeToString)(returnCode)\n              };\n            }, _common.processErrorResponse));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _publicKeyv.apply(this, arguments);\n}"]},"metadata":{},"sourceType":"script"}