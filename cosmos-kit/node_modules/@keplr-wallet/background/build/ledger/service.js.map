{"version":3,"file":"service.js","sourceRoot":"","sources":["../../src/ledger/service.ts"],"names":[],"mappings":"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"}